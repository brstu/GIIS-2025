# Лабораторная работа 2

## Тема: "Интерактивный визуализатор данных"

## Цель работы

 Загрузка данных в табличном формате и отображение результатов в виде графиков и диаграмм для последующего анализа

## Основные требования

1. Интерфейс пользователя:
    - Возможность загрузки файлов данных (например, CSV, Excel).
    - Меню для выбора типов визуализации (линейные графики, гистограммы, диаграммы рассеяния и т.д.).
    - Интерактивные элементы управления (фильтры, ползунки, выпадающие списки и т.д.) для изменения параметров визуализации.
2. Обработка данных:
    - Импорт данных из загруженных файлов + визуализация данных в форме таблицы.
    - Обработка и очистка данных (например, устранение пропущенных значений, нормализация).
    - Возможность группировки и агрегирования данных.
3. Алгоритмы визуализации:
    - Реализация различных типов визуализаций (линейные графики, гистограммы, диаграммы рассеяния, круговые диаграммы и т.д.).
    - Возможность динамического обновления визуализаций при изменении параметров.
    - Интерактивные графики (увеличение, уменьшение, выделение отдельных элементов).
4. Функциональные возможности:
    - Возможность экспорта визуализаций в виде изображений (PNG, JPEG) или PDF.
    - Встроенные пояснения и подсказки для пользователей.

    
Оценка работы:
Для оценки работы в 4-5 баллов, нужно выполнить все Зеленые пункты.
Для оценки работы в 7-8 баллов, нужно дополнительно выполнить Бирюзовые пункты. Их всего 4, можно взять любые 3. 
Для оценки в 9-10 нужно выполнить Фиолетовые пункты. Их всего 2.
Итоговая оценка за работу складывается из числа выполненных требований к работе. Обязательными считаются зеленые, все остальные повышают итоговую оценку за работу. 

 

## Код программы

```
import streamlit as st
import pandas as pd
import plotly.express as px
import io

st.set_page_config(page_title="Визуализация данных", layout="wide")

st.title("Интерактивная визуализация данных")

uploaded_file = st.file_uploader("Загрузите CSV или Excel файл", type=["csv", "xlsx"])

if uploaded_file:
    if uploaded_file.name.endswith('.csv'):
        df = pd.read_csv(uploaded_file)
    else:
        df = pd.read_excel(uploaded_file)

    st.subheader("Просмотр данных")
    st.dataframe(df)

    df = df.dropna()

    st.subheader("Построение графика")

    chart_type = st.selectbox("Тип визуализации",
                              ["Линейный график", "Гистограмма", "Диаграмма рассеяния", "Круговая диаграмма"])

    x_column = st.selectbox("Ось X", df.columns)
    y_column = st.selectbox("Ось Y", df.select_dtypes(include='number').columns)

    fig = None

    if chart_type == "Линейный график":
        fig = px.line(df, x=x_column, y=y_column)
    elif chart_type == "Гистограмма":
        fig = px.histogram(df, x=x_column, y=y_column)
    elif chart_type == "Диаграмма рассеяния":
        fig = px.scatter(df, x=x_column, y=y_column)
    elif chart_type == "Круговая диаграмма":
        pie_column = st.selectbox("Категориальный столбец для круговой диаграммы", df.columns)
        count_data = df[pie_column].value_counts().reset_index()
        count_data.columns = [pie_column, "count"]
        fig = px.pie(count_data, names=pie_column, values="count")

    if fig:
        st.plotly_chart(fig, use_container_width=True)

        st.subheader("Экспорт визуализации")
        export_format = st.selectbox("Формат экспорта", ["PNG", "JPEG", "PDF"])

        try:
            import plotly.io as pio

            buffer = io.BytesIO()
            fig.write_image(buffer, format=export_format.lower())
            st.download_button(
                label=f"Скачать график как {export_format}",
                data=buffer,
                file_name=f"chart.{export_format.lower()}",
                mime=f"image/{export_format.lower()}"
            )
        except ValueError as e:
            st.warning(f" Для экспорта в изображение установите пакет Kaleido:\n```\npip install -U kaleido\n```")
        except Exception as ex:
            st.error(f"Ошибка экспорта: {ex}")

    st.subheader("Группировка данных")
    group_col = st.selectbox("Столбец для группировки", df.columns)
    agg_func = st.selectbox("Функция агрегации", ["mean", "sum", "max", "min"])

    numeric_cols = [col for col in df.select_dtypes(include='number').columns if col != group_col]

    try:
        df_grouped = df.groupby(group_col)[numeric_cols].agg(agg_func).reset_index()
        st.write("Результат группировки:")
        st.dataframe(df_grouped)
    except Exception as e:
        st.error(f"❗ Ошибка при группировке: {e}")
```
 
## Результаты работы
 
1. Интерфейс пользователя:
    - Возможность загрузки файлов данных (например, CSV, Excel).
      ![](img/2.png)
    - Меню для выбора типов визуализации (линейные графики, гистограммы, диаграммы рассеяния и т.д.).
    - Интерактивные элементы управления (фильтры, ползунки, выпадающие списки и т.д.) для изменения параметров визуализации.


2. Обработка данных:
    - Импорт данных из загруженных файлов + визуализация данных в форме таблицы.
    - Обработка и очистка данных (например, устранение пропущенных значений, нормализация).
    - Возможность группировки и агрегирования данных.
      
3. Алгоритмы визуализации:
    - Реализация различных типов визуализаций (линейные графики, гистограммы, диаграммы рассеяния, круговые диаграммы и т.д.).
    - Возможность динамического обновления визуализаций при изменении параметров.
    - Интерактивные графики (увеличение, уменьшение, выделение отдельных элементов).


4. Функциональные возможности:
    - Возможность экспорта визуализаций в виде изображений (PNG, JPEG) или PDF.
    - Встроенные пояснения и подсказки для пользователей.
